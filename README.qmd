---
title: "MPQuarto"
format: gfm
editor: visual
---

## Quarto

Data was obtained from previous year's project with permission from Professor William Froneman on Microplastics in different sediment-dwelling invertebrates in the Galpin salt marsh, South Africa. The study focused on trait based analyses of microplastic consumption to determine if feeding type (grazer, deposit feeder, filter feeder, carnivore), microplastic ratio types (fibre, particles) and depth (water column, sediment surface, 10cm and 20cm depth) affected microplastic consumption.

Feeding type characterised specimens observed, below is a table of the species used per feeding type:

| Species | Common name | Localisation | Feeding mode | Sample size |
|----|----|----|----|----|
| *Nassarius kraussianus* | Tick shell | epifauna | Grazer | 30 |
| *Nucella dubia* | whelk | epifauna | Carnivore | 30 |
| *Kraussillichirus kraussi* | Sand prawn | infauna | Deposit feeder | 30 |
| *Marphysa eliteuni* | Redbait/ bloodworm | infauna | Filter feeder | 30 |

Explanation of repo on main repo page under README: MP_datawrangling

Binder badge: \[\![Binder\](https://mybinder.org/badge_logo.svg)\](https://mybinder.org/v2/gh/raeragoobeer-26/MP_datawrangling/HEAD)

Code is found below and the figure is at the bottom as well:

Installing necessary packages

```{r}
install.packages("tidyverse")
install.packages("palmerpenguins")
gitcreds::gitcreds_set() # had to generate new token to allow comm between R and Git
```

calling necessary libraries with functions need to use

```{r}
library(tidyverse)
library(readxl)
excel_sheets("globalchange-project.xlsx")
library(dplyr)
library(ggplot2)
```

Reading in (messy) data then tidying up

```{r}
# reading in (messy) data
data <- read_xlsx("globalchange-project.xlsx")
data
data2 <- read_xlsx("globalchange-project.xlsx", range = "B1:M22") # combining summer and winter data for this project 
findata <- data2[-c(11, 12, 13), ] # removing NA rows 
colnames(findata) <- paste(colnames(findata), as.character(unlist(findata[1, ])), sep = "_") # adding units from rows to column headers 
findata <- findata[-1, ] # deleting row appended to headers 
findata <- findata[-1, ] # removing next row and will add necessary species names to notes 
summary(findata)
str(findata)

findata[] <- lapply(findata, function(x) { 
  if(is.character(x)) as.numeric(x) else x # ensuring data is numeric 
})
```

Subsetting data to create figure (bar plot):

```{r}
feeding_data <- findata[, 1:4]
# Convert to long format for ggplot
long_data <- pivot_longer(feeding_data, 
                          cols = c(`Grazer_(# particles g wwt)`,
                            `Filter feeder_(# particles g wwt)`,
                            `Deposit feeder_(# particles g wwt)`,
                            `Carnivore_(# particles g wwt)`),
                          names_to = "Feeding_Type", values_to = "Particles_g_wwt")
colnames(feeding_data) <- c("Grazer", "Filter feeder", "Deposit feeder", "Carnivore", "sample_ID")
long_data$Feeding_Type <- factor(long_data$Feeding_Type,
                        levels = c("Grazer_(# particles g wwt)",
                                   "Filter feeder_(# particles g wwt)",
                                   "Deposit feeder_(# particles g wwt)",
                                   "Carnivore_(# particles g wwt)"),
                        labels = c("Grazer", "Filter feeder", "Deposit feeder", "Carnivore"))


ggplot(long_data, aes(x = Feeding_Type, y = Particles_g_wwt, fill = Feeding_Type)) +
  geom_boxplot() +
  labs(title = "Distribution of # Particles per g wwt by Feeding Type",
       x = "Feeding Type", y = "# Particles per g wet weight") +
  theme_minimal() +
  theme(legend.position = "none")
```

Image: Barplot

![](Screenshot%202026-02-26%20at%2022.23.47.png)
